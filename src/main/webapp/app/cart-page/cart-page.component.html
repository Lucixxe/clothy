<h2 class="cart-title">Votre panier</h2>

<div class="cart-container">
  <!-- Panier vide pour non connecté -->
  <div *ngIf="!accountService.isAuthenticated() && items.length === 0" class="cart-empty">
    <i class="fa fa-shopping-cart fa-2x"></i>
    <p>Votre panier est vide.</p>
  </div>

  <!-- Panier non connecté -->
  <div *ngIf="!accountService.isAuthenticated()">
    <div *ngFor="let item of items" class="cart-item-card">
      <div class="cart-item-info">
        <span class="cart-item-name">{{ item.name }}</span>
        <span class="cart-item-price">{{ item.price }} €</span>
        <span class="cart-item-qty">
          <button (click)="decreaseQty(item)">−</button>
          x {{ item.quantity }}
          <button (click)="increaseQty(item)">+</button>
        </span>
      </div>
      <button class="cart-remove-btn" (click)="remove(item.id)"><i class="fa fa-trash"></i> Retirer</button>
    </div>
    <div *ngIf="items.length > 0" class="cart-total">
      <p>
        Total : <strong>{{ total }} €</strong>
      </p>
      <button class="cart-clear-btn" (click)="clear()"><i class="fa fa-trash"></i> Vider le panier</button>
      <button class="payement" (click)="goToPayment()"><i class="fa fa-credit-card"></i> Passer au paiement</button>
    </div>
  </div>

  <!-- Panier connecté -->
  <div *ngIf="accountService.isAuthenticated()">
    <div *ngIf="itemsICart.length === 0" class="cart-empty">
      <i class="fa fa-shopping-cart fa-2x"></i>
      <p>Votre panier est vide.</p>
    </div>
    <div *ngFor="let item of itemsICart" class="cart-item-card">
      <div class="cart-item-info">
        <span class="cart-item-name">{{ item.product?.name }}</span>
        <span class="cart-item-price">{{ item.product?.price }} €</span>
        <span class="cart-item-qty">
          <button (click)="decreaseQty(item)">−</button>
          x {{ item.quantity }}
          <button (click)="increaseQty(item)">+</button>
        </span>
      </div>
      <button class="cart-remove-btn" (click)="remove(item.id)"><i class="fa fa-trash"></i> Retirer</button>
    </div>
    <div *ngIf="itemsICart.length > 0" class="cart-total">
      <p>
        Total : <strong>{{ total }} €</strong>
      </p>
      <button class="cart-clear-btn" (click)="clear()"><i class="fa fa-trash"></i> Vider le panier</button>
      <button class="payement" (click)="goToPayment()"><i class="fa fa-credit-card"></i> Passer au paiement</button>
    </div>
  </div>
</div>

<style>
  .cart-title {
    text-align: center;
    color: #ef233c;
    margin-bottom: 30px;
    font-size: 2rem;
  }
  .cart-container {
    max-width: 600px;
    margin: 0 auto;
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(44, 62, 80, 0.08);
    padding: 30px 20px;
  }
  .cart-empty {
    text-align: center;
    color: #aaa;
    margin: 40px 0;
  }
  .cart-item-card {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #f8f9fa;
    border-radius: 8px;
    padding: 15px 20px;
    margin-bottom: 15px;
    box-shadow: 0 1px 4px rgba(44, 62, 80, 0.05);
  }
  .cart-item-info {
    display: flex;
    gap: 20px;
    align-items: center;
  }
  .cart-item-name {
    font-weight: 500;
    color: #2b2d42;
  }
  .cart-item-price {
    color: #ef233c;
    font-weight: 600;
  }
  .cart-item-qty {
    color: #555;
  }
  .cart-remove-btn {
    background: none;
    border: none;
    color: #ef233c;
    cursor: pointer;
    font-size: 1rem;
    transition: color 0.2s;
  }
  .cart-remove-btn:hover {
    color: #d90429;
  }
  .cart-total {
    text-align: right;
    margin-top: 30px;
  }
  .cart-clear-btn {
    background: #ef233c;
    color: #fff;
    border: none;
    border-radius: 6px;
    padding: 8px 18px;
    cursor: pointer;
    margin-top: 10px;
    font-size: 1rem;
    transition: background 0.2s;
  }
  .cart-clear-btn:hover {
    background: #d90429;
  }
</style>
